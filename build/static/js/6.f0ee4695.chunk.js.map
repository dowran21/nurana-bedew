{"version":3,"sources":["components/Products/Form.js"],"names":["schema","Yup","shape","product_name","min","max","required","stock_count","price","quantity","description_tm","Form","values","setClose","setProducts","products","setLoad","useForm","resolver","yupResolver","defaultValues","register","handleSubmit","errors","formState","useState","producers","setProducers","file","setFile","useEffect","get_producers","then","data","rows","onSubmit","a","console","log","update_product","map","item","id","e","add_product","id_data","im","FormData","append","add_product_image","className","htmlFor","type","name","placeholder","message","defaultValue","producer_id","value","disabled","length","producer_name","producer_country_id","style","transition","step","email","onChange","target","files","multiple","fullname"],"mappings":"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","file":"static/js/6.f0ee4695.chunk.js","sourcesContent":["import { useForm } from \"react-hook-form\";\nimport { useState, useEffect } from \"react\";\nimport { add_product, add_product_image, get_producers, update_product} from \"../../http/adminApi\";\nimport * as Yup from 'yup';\nimport { yupResolver } from '@hookform/resolvers/yup';\n\n\n\n\nfunction Form({values, setClose, setProducts, products, setLoad}){\n  const { register, handleSubmit, formState: { errors } } = useForm({ \n    resolver: yupResolver(schema),\n    defaultValues:values\n  });\n  \n  const [producers, setProducers] = useState([])\n  // const [countries, setCountries] = useState([])\n  const [file, setFile] = useState(null)\n\n  const ChangeImage = (e)=>{\n    console.log(e.target.files)\n    setFile(e.target.files[0])\n  }\n\n  useEffect (()=>{\n    get_producers().then(data=>\n      setProducers(data.rows.producers));\n  }, [])\n  \n  // const im = new \n  // im.append('picture', file);\n  // console.log(file)\n\n  const onSubmit = async (data) => {\n    if(values){\n      try {\n        // setLoad(true)\n\n        console.log(data)\n        update_product(data).then(data => setClose())\n        setProducts(products.map(item => {\n          if(item.id === data.id){\n            return data\n          }return item\n        }))\n        // setLoad(false)\n        setClose()\n      } catch (e) {\n        console.log(e)\n      }\n    }else{\n      try {\n        console.log(\"i am in try\")\n        const id_data = await add_product(data);\n        console.log(id_data)\n        const id = id_data.rows.id;\n        console.log(id)\n        const im = new FormData();\n        im.append('picture', file)\n        console.log(im)\n        await add_product_image(id, im);\n        setProducts([id_data.rows, ...products ])\n        setLoad(false)\n        setClose()\n      } catch (e) {\n        // alert (e.response.status)  \n        console.log(e)      \n      }\n    }\n  }  \n\n  return(\n    <div className=\"flex flex-col justify-start px-4 pb-6\">\n      <form onSubmit={handleSubmit(onSubmit)} className=\"pt-2\">\n        <div className=\"relative w-full mt-5 flex flex-col justify-start items-start\">\n          <label className=\"block uppercase text-gray-700 dark:text-gray-200 text-xs font-medium mb-2\" htmlFor=\"email\">\n            Harydyň ady\n          </label>\n          <input {...register(\"product_name\")} type=\"text\" name=\"product_name\" placeholder=\"Ady, Familýa\"\n            className={ errors.product_name ? \n              \"px-3 py-2 placeholder-gray-400 text-gray-700 dark:text-gray-200  bg-white dark:bg-gray-700 rounded text-sm focus:outline-none ring-1 ring-red-500 w-full\"\n              :         \n              \"px-3 py-2 placeholder-gray-400 text-gray-700 dark:text-gray-200  bg-white dark:bg-gray-700 rounded text-sm focus:outline-none  border-0 ring-1 ring-gray-300 dark:ring-gray-800 focus:ring-purple-700 dark:focus:ring-2 dark:focus:ring-gray-600 w-full\"\n            }\n          />\n          <div className=\"absolute top-14 left-0 text-xs text-red-500 font-normal mt-2\">{errors.product_name?.message}</div>\n        </div>\n        <div className=\"flex flex-col md:flex-row md:justify-between items-center\">\n        <div className=\"relative w-full mt-3 \">\n          <label className=\"block uppercase text-gray-700 dark:text-gray-200 text-xs text-left font-medium mb-2\" htmlFor=\"email\">\n            Öndüriji\n          </label>\n            <select defaultValue=\"\" {...register(\"producer_id\")} name=\"producer_id\"\n                 className={ errors.producer_id ? \n                  \"px-3 py-2 placeholder-gray-400 text-gray-700 dark:text-gray-200  bg-white dark:bg-gray-700 rounded text-sm focus:outline-none ring-1 ring-red-500 w-full\"\n                  :\n                  \"px-3 py-2 placeholder-gray-400 text-gray-700 dark:text-gray-200  bg-white dark:bg-gray-700 rounded text-sm focus:outline-none  border-0 ring-1 ring-gray-300 dark:ring-gray-800 focus:ring-purple-700 dark:focus:ring-2 dark:focus:ring-gray-600 w-full\"\n              }>\n                 <option key =\"\" value = \"0\" disabled>Önduriji saýlan</option>\n                {producers?.length && producers.map(item =>\n                  <option key = {item.id} value = {item.id}>{item.producer_name}</option>)}\n            </select>\n            <div className=\"absolute top-14 left-0 text-xs text-red-500 font-normal mt-2\">{errors.producer_country_id?.message}</div>\n        </div>\n        </div>\n        <div className=\"flex flex-col md:flex-row md:justify-between items-center\">\n          <div className=\"relative w-full mt-3 px-2\">\n            <label className=\"block uppercase text-gray-700 dark:text-gray-200 text-xs text-left font-medium mb-2\" htmlFor=\"email\">\n              Sany\n            </label>\n            <input {...register(\"stock_count\")} type=\"number\" name=\"stock_count\" placeholder=\"Galan sany\"\n              className={ errors.stock_count ? \n                \"px-3 py-2 placeholder-gray-400 text-gray-700 dark:text-gray-200  bg-white dark:bg-gray-700 rounded text-sm focus:outline-none ring-1 ring-red-500 w-full\"\n                :\n                \"px-3 py-2 placeholder-gray-400 text-gray-700 dark:text-gray-200  bg-white dark:bg-gray-700 rounded text-sm focus:outline-none  border-0 ring-1 ring-gray-300 dark:ring-gray-800 focus:ring-purple-700 dark:focus:ring-2 dark:focus:ring-gray-600 w-full\"\n              }              \n              style={{ transition: \"all .15s ease\" }}\n            />\n            <div className=\"absolute text-sm text-red-600 font-base mt-1\">{errors.stock_count?.message}</div>\n          </div>\n          <div className=\"relative w-full mt-3 px-2\">\n            <label className=\"block uppercase text-gray-700 dark:text-gray-200 text-xs text-left font-medium mb-2\" htmlFor=\"email\">\n              Bahasy\n            </label>\n            <input {...register(\"price\")} type=\"number\" step = \"0.01\" name=\"price\" placeholder=\"Bahasy\"\n              className={ errors.price ? \n                \"px-3 py-2 placeholder-gray-400 text-gray-700 dark:text-gray-200  bg-white dark:bg-gray-700 rounded text-sm focus:outline-none ring-1 ring-red-500 w-full\"\n                :\n                \"px-3 py-2 placeholder-gray-400 text-gray-700 dark:text-gray-200  bg-white dark:bg-gray-700 rounded text-sm focus:outline-none  border-0 ring-1 ring-gray-300 dark:ring-gray-800 focus:ring-purple-700 dark:focus:ring-2 dark:focus:ring-gray-600 w-full\"\n              }                \n              style={{ transition: \"all .15s ease\" }}\n            />\n            <div className=\"absolute text-sm text-red-600 font-base mt-1\">{errors.price?.message}</div>\n          </div>\n          <div className=\"relative w-full mt-3 px-2\">\n            <label className=\"block uppercase text-gray-700 dark:text-gray-200 text-xs text-left font-medium mb-2\" htmlFor=\"email\">\n              Gutudaky sany\n            </label>\n            <input {...register(\"quantity\")} type=\"number\" name=\"quantity\" placeholder=\"sany\"\n              className={ errors.quantity ? \n                \"px-3 py-2 placeholder-gray-400 text-gray-700 dark:text-gray-200  bg-white dark:bg-gray-700 rounded text-sm focus:outline-none ring-1 ring-red-500 w-full\"\n                :\n                \"px-3 py-2 placeholder-gray-400 text-gray-700 dark:text-gray-200  bg-white dark:bg-gray-700 rounded text-sm focus:outline-none  border-0 ring-1 ring-gray-300 dark:ring-gray-800 focus:ring-purple-700 dark:focus:ring-2 dark:focus:ring-gray-600 w-full\"\n              }              \n              style={{ transition: \"all .15s ease\" }}\n            />\n            <div className=\"absolute text-sm text-red-600 font-base mt-1\">{errors.quantity?.message}</div>\n          </div>\n          <div className=\"relative w-full-1 mt-3 \">\n            <label className=\"block uppercase text-gray-700 dark:text-gray-200 text-xs text-left font-medium mb-2\" htmlFor=\"email\">\n              Srogy\n            </label>\n            <input {...register(\"date_of_expire\")} type=\"date\" name=\"date_of_expire\" placeholder=\"Srogy\"\n              className={\"px-3 py-2 placeholder-gray-400 text-gray-700 dark:text-gray-200  bg-white dark:bg-gray-700 rounded text-sm focus:outline-none  border-0 ring-1 ring-gray-300 dark:ring-gray-800 focus:ring-purple-700 dark:focus:ring-2 dark:focus:ring-gray-600 w-full\"}\n              style={{ transition: \"all .15s ease\" }}\n            />\n            <div className=\"absolute text-sm text-red-600 font-base mt-1\"></div>\n          </div>\n        </div>\n        <div className=\"flex flex-col md:flex-row md:justify-between items-center\">\n          <div className=\"relative w-full mt-3 px-2\">\n            <label className=\"block uppercase text-gray-700 dark:text-gray-200 text-xs text-left font-medium mb-2\">\n              Harydyň düşündirişi tm\n            </label>\n            <textarea {...register(\"description_tm\")} type=\"text\" name=\"description_tm\" placeholder=\"Turkmence dusundiris\"\n              className={ errors.email ? \n                \"px-3 py-2 w-auto placeholder-gray-400 text-gray-700 dark:text-gray-200  bg-white dark:bg-gray-700 rounded text-sm focus:outline-none ring-1 ring-red-500 w-full\"\n                :\n                \"px-3 py-2 placeholder-gray-400 text-gray-700 dark:text-gray-200  bg-white dark:bg-gray-700 rounded text-sm focus:outline-none  border-0 ring-1 ring-gray-300 dark:ring-gray-800 focus:ring-purple-700 dark:focus:ring-2 dark:focus:ring-gray-600 w-full\"\n              }\n              style={{ transition: \"all .15s ease\" }}\n            />\n          </div>\n        </div>\n        <div className=\"flex flex-col md:flex-row md:justify-between items-center\">\n          <div className=\"relative w-full mt-3 px-2\">\n            <label className=\"block uppercase text-gray-700 dark:text-gray-200 text-xs text-left font-medium mb-2\">\n              Harydyň düşündirisi ru\n            </label>\n            <textarea {...register(\"description_ru\")} type=\"text\" name=\"description_ru\" placeholder=\"Orsca dusundiris\"\n              className={ errors.email ? \n                \"px-3 py-2 w-auto placeholder-gray-400 text-gray-700 dark:text-gray-200  bg-white dark:bg-gray-700 rounded text-sm focus:outline-none ring-1 ring-red-500 w-full\"\n                :\n                \"px-3 py-2 placeholder-gray-400 text-gray-700 dark:text-gray-200  bg-white dark:bg-gray-700 rounded text-sm focus:outline-none  border-0 ring-1 ring-gray-300 dark:ring-gray-800 focus:ring-purple-700 dark:focus:ring-2 dark:focus:ring-gray-600 w-full\"\n              }\n              style={{ transition: \"all .15s ease\" }}\n            />\n            <div className=\"absolute text-sm text-red-600 font-base mt-1\">{errors.email?.message}</div>\n          </div>\n            <div className=\"absolute text-sm text-red-600 font-base mt-1\">{errors.email?.message}</div>\n          </div>\n          {!values && \n          <div className=\"relative w-full mt-5 flex flex-col justify-start items-start\">\n          <label className=\"block uppercase text-gray-700 dark:text-gray-200 text-xs font-medium mb-2\" htmlFor=\"email\">\n            Harydyň suraty\n          </label>\n          <input type=\"file\" onChange = {ChangeImage} multiple =\"\"\n            className=  \"px-3 py-2 placeholder-gray-400 text-gray-700 dark:text-gray-200  bg-white dark:bg-gray-700 rounded text-sm focus:outline-none  border-0 ring-1 ring-gray-300 dark:ring-gray-800 focus:ring-purple-700 dark:focus:ring-2 dark:focus:ring-gray-600 w-full\"/>\n          <div className=\"absolute top-14 left-0 text-xs text-red-500 font-normal mt-2\">{errors.fullname?.message}</div>\n        </div>\n\n          }\n        <div className=\"text-center mt-12 mb-2\">\n          <button\n            className=\"bg-purple-700 hover:bg-purple-600 text-white  active:bg-gray-700 text-sm font-medium uppercase px-6 py-3 rounded shadow outline-none focus:outline-none mr-1 mb-1 w-full\"\n            type=\"submit\" \n          >\n            {values ? \"Üýtgetmek\" : \"Goşmak\"}\n          </button>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nconst schema = Yup.object().shape({\n  product_name: Yup.string().min(3, \"Azyndan 3 simwol bolmaly!\").max(100, \"Iň köp 100 simwol bolmaly!\")\n      .required(\"Hökman gerek\"),\n  stock_count: Yup.number().min(0, \"Noldan kiçi bolmaly däl\").max(999999)\n    .required(\"Required\"),\n  price: Yup.number().min(1, \"Minimum bahasy 1-den kici bolup bilmez\").max(999999, \"Maksimum bahasy 999999\")\n    .required(\"Hokmany\"),\n  quantity: Yup.number().min(1, 'Gutudaky sanny 1-den az bolmaly dal').max(100000, \"Maksimum 100000 kop nolmaly dal\")\n    .required(\"Hokmany\"),\n  description_tm: Yup.string().min(0, \"Minimum 10 simwol bolmaly\").max(2000, \"maksimum 2000 simwol bolmaly\"),\n  description_tm: Yup.string().min(0, \"Minimum 10 simwol bolmaly\").max(2000, \"maksimum 2000 simwol bolmaly\"),\n});\n\nexport default Form;\n"],"sourceRoot":""}